<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/admin.css">
    <title>Post News | Croevo AI</title>
</head>
<body>

<nav class="sidebar">
    <h3 class="gradient-text">CROEVO ADMIN</h3>
    <ul class="nav-menu">
        <li><a href="dashboard.html">Overview</a></li>
        <li><a href="memo-gen.html">Memo Generator</a></li>
        <li><a href="news-post.html" class="active">Announcements</a></li>
        <li><a href="team-manage.html">Team Control</a></li><li><a href="subscribers.html">Subscribers</a></li>
        <li><a href="settings.html">Settings</a></li>
    </ul>
</nav>

<div class="main-content">
    <h2 class="gradient-text">ðŸ“¢ Post New Announcement</h2>
    <div class="admin-card">
        <label>Bulletin Title</label>
        <input type="text" id="newsTitle" class="admin-input" placeholder="e.g. Croevo AI Launch Event">
        <label>Content</label>
        <textarea id="newsContent" class="admin-input" style="height: 200px;" placeholder="Write your announcement details here..."></textarea>
        <button id="postBtn" class="btn-primary" style="width: 100%;">Publish to Website</button>
    </div>
</div>

<script type="module">
    import { supabase } from '../js/supabase-config.js';

    document.getElementById('postBtn').onclick = async () => {
        const title = document.getElementById('newsTitle').value;
        const content = document.getElementById('newsContent').value;

        const { error } = await supabase.from('news').insert([{ title, content }]);

        if (error) alert("Error: " + error.message);
        else {
            alert("Announcement Live!");
            location.reload();
        }
    };
</script>
</body>
</html>